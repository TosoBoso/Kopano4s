<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<title>Kopano Administration - Tools</title>
		<meta charset="utf-8">
		<link rel="stylesheet" type="text/css" href="dsm.css"/>
		<style> .hide { display: none; } </style>
	</head>
	<body>
	<!--:menu:-->
	<!-- Tab links -->
	<div class="tab"><ol>
		<li><a href="#" class="tablinks" onclick="openTab(event, 'IP-Autoblock')" id="defaultOpen">IP-Autoblock</a></li>
		<li><a href="#" class="tablinks" onclick="openTab(event, 'SPF')">SPF</a></li>

	</ol></div>
	<!-- Tab content -->
	<div id="IP-Autoblock" class="tabcontent">
		<h3>IP-Autoblock is work in progress and will be available in later release</h3>
		<p><b><u>Tips:</u></b>&nbsp;</p>
	</div>
	<div id="SPF" class="tabcontent">
		<h3>SPF Wizard powerd by openspf.org - copy and paste the below result as your DNS entry -</h3>
		<input type="text" name="dnsentry" id="dnsentry" size="95" value=""/>
    	<div class="form"><table>
			<tr>
                <td style="width: 650px;">Your Domain:</td>
                <td><input type="text" name="domain" id="domain" class="frmT" title="The domain for which you want to add the SPF record.<br />i.e. <b>example.com</b>" onfocusout="getSPF();" /></td>
            </tr>
			<tr>
				<td>Allow servers listed as MX to send email for this domain:</td>
				<td>
					<select name="mx_allow" id="mx_allow" class="frmS" title="Do these MX servers send emails for this domain?Current handlers:<br><b>mx1.domain.com<br>mx2.domain.com</b>" onchange="getSPF();" >
						<option value="0">No</option>
						<option value="1">Yes (recommended)</option>
					</select>
				</td>
			</tr>
			
			            <tr>
                <td>Allow current IP address of the domain to send email for this domain:</td>
                <td>
                    <select name="ip_allow" id="ip_allow" class="frmS" title="Do the domain main IP send emails for this domain?<br>Main IP: <b>10.0.0.1<b>" onchange="getSPF();">
                        <option value="0">No</option>
                        <option value="1">Yes (recommended)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Allow any hostname ending in <span id="domainSP" style="font-weight: bold;"></span> to send email for this domain:</td>
                <td>
                    <select name="host_allow" id="host_allow" class="frmS" title="Are all subdomains allowed to send emails for this main domain?" onchange="getSPF();">
                        <option value="0">No (recommended)</option>
                        <option value="1">Yes</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>IP addresses in CIDR format that deliver or relay mail for this domain:</td>
                <td><input type="text" name="ip_additional" id="ip_additional" class="frmT" title="Add the server IP addresses that may send mail with subnet mask space separated. Use /32 for a single IP.<br />i.e. <b>10.0.0.1/32 192.168.0.1/28</b>" onkeyup="getSPF();" /></td>
            </tr>
            <tr>
                <td>Add any other server hostname that may deliver or relay mail for this domain:</td>
                <td><input type="text" name="host_additional" id="host_additional" class="frmT" title="Add the servers that are allowed to send mails for this domain space separated.<br />i.e. <b>ns1.example.com ns2.example.com</b>" onkeyup="getSPF();" /></td>
            </tr>
            <tr>
                <td>Any domains that may deliver or relay mail for this domain:</td>
                <td><input type="text" name="domain_additional" id="domain_additional" class="frmT" title="Add other domains that can send emails for this domain, such a third party service space separated.<br />i.e. <b>3rdparty.com 1stparty.com</b>" onkeyup="getSPF();" /></td>
            </tr>
            <tr>
                <td>How strict should be the servers treating the emails?:</td>
                <td>
                    <select name="restrict" id="restrict" class="frmS" title="Select the option that best fits." onchange="getSPF();">
                        <option value="0">-</option>
                        <option value="1">Fail (Will be rejected)</option>
                        <option value="2">SoftFail (Accepted but marked)</option>
                        <option value="3">Neutral (Probably accepted)</option>
                    </select>
                </td>
            </tr>
			
        </table></div>
    	<br>
    	<!-- TODO: in perl dig +short txt to get existing entry -->
		<p><b><u>Tips:</u></b>&nbsp;</p>
	</div>
	<!-- style for bottom position -->
	<div style='position:absolute;bottom:0;padding:0px 0px;'>
		<textarea name="status" rows="1" cols="111"> <!--:status:--> </textarea>
	</div>
	<!-- end of style and section main body right hand side to navigation -->
	</div>
	<!--:debug:-->
	<!--:jscript:-->
	</body>
</html>